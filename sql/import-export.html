<!DOCTYPE html>
<html class="writer-html5" lang="pt-BR" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1.11. Importando e Exportando Dados &mdash; GeoCreditoRural</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/table_styling.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tutorial.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://geo-credito-rural.github.io/sql/import-export.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/translations.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Buscar" href="../search.html" />
    <link rel="next" title="1.12. Considerações Finais" href="consideracoes.html" />
    <link rel="prev" title="1.10. Consultas em SQL" href="consultas.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #F0F8FF" >

          
          
          <a href="../index.html" class="icon icon-home">
            GeoCreditoRural
              <img src="../_static/logo.jpeg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Pesquisar documentos" aria-label="Pesquisar documentos" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Menu de navegação">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Monitoramento de Operações de Crédito Rural por meio de Geotecnologias</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Aulas:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">1. Introdução à Linguagem de Consulta SQL</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="instalacao.html">1.1. Instalação do Servidor PostgreSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="conectando-bd.html">1.2. Conectando ao Servidor PostgreSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="criando-bd.html">1.3. Criando um Novo Banco de Dados no PostgreSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="tabelas.html">1.4. Conceitos do Modelo Relacional</a></li>
<li class="toctree-l2"><a class="reference internal" href="tipos-dados.html">1.5. Tipos de Dados SQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="tipos-geometricos.html">1.6. Tipos Geométricos</a></li>
<li class="toctree-l2"><a class="reference internal" href="postgis-geometry.html">1.7. PostGIS Geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="criando-tabelas.html">1.8. Criando Tabelas</a></li>
<li class="toctree-l2"><a class="reference internal" href="inserindo-dados.html">1.9. Inserindo Dados</a></li>
<li class="toctree-l2"><a class="reference internal" href="consultas.html">1.10. Consultas em SQL</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.11. Importando e Exportando Dados</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#importando-arquivos-csv">1.11.1. Importando arquivos CSV</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exportando-para-arquivos-csv">1.11.2. Exportando para Arquivos CSV</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="consideracoes.html">1.12. Considerações Finais</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../jupyter/index.html">2. Ambiente de Computação Interativa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sicor/index.html">3. Dados do Sicor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bases-vetoriais/index.html">4. Impedimentos Sociais, Ambientais e Climáticos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uso-cobertura-terra/index.html">5. Uso e Cobertura da Terra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acesso-imagens/index.html">6. Imagens de Satélites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../series-temporais/index.html">7. Séries Temporais de Imagens de Satélites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fenologia/index.html">8. Fenologia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../padroes-series-temporais/index.html">9. Padrões em Séries Temporais de Imagens de Satélites</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Referências Bibliográficas</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../referencias.html">Referências Bibliográficas</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Informações Gerais:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../licenca.html">Licença</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agradecimentos.html">Agradecimentos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Índice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossário</a></li>
<li class="toctree-l1"><a class="reference internal" href="../search.html">Página de Busca</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Menu de navegação móvel"  style="background: #F0F8FF" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GeoCreditoRural</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Navegação da página">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">1. </span>Introdução à Linguagem de Consulta SQL</a></li>
      <li class="breadcrumb-item active"><span class="section-number">1.11. </span>Importando e Exportando Dados</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Navegação sequencial da página">
        <a href="consultas.html" class="btn btn-neutral float-left" title="1.10. Consultas em SQL" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Anterior</a>
        <a href="consideracoes.html" class="btn btn-neutral float-right" title="1.12. Considerações Finais" accesskey="n">Próximo <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="importando-e-exportando-dados">
<span id="sec-sql-import-export"></span><h1><span class="section-number">1.11. </span>Importando e Exportando Dados<a class="headerlink" href="#importando-e-exportando-dados" title="Link permanente para este cabeçalho"></a></h1>
<p>O PostgreSQL fornece um comando para uso via SQL chamado <code class="docutils literal notranslate"><span class="pre">COPY</span></code> que permite mover dados de arquivos para tabelas do banco de dados e vice-versa. Este comando trata arquivos no formato texto, CSV e binários. As ferramentas clientes, como o <em>psql</em> e o <em>pgAdmin</em>, fornecem recursos que utilizam esse comando para copiar dados entre o cliente e o servidor. Nesta seção, vamos explorar esse comando de importação e exportação de dados diretamente do lado servidor bem como através das ferramentas <em>psql</em>, com o meta-comando <code class="docutils literal notranslate"><span class="pre">\copy</span></code>, e pela interface gráfica do <em>pgAdmin</em>.</p>
<section id="importando-arquivos-csv">
<h2><span class="section-number">1.11.1. </span>Importando arquivos CSV<a class="headerlink" href="#importando-arquivos-csv" title="Link permanente para este cabeçalho"></a></h2>
<p>Considere o arquivo <a class="reference download internal" download="" href="../_downloads/5342343c142ebd11d9a9991158298817/glebas-2024-subconjunto.csv"><code class="xref download docutils literal notranslate"><span class="pre">glebas-2024-subconjunto.csv</span></code></a>, mostrado parcialmente abaixo, e que contém dados sobre 50 glebas de operações de crédito rural com recursos públicos do ano de 2024.</p>
<div class="literal-block-wrapper docutils container" id="data-sql-glebas-2024-subconjunto">
<div class="code-block-caption"><span class="caption-number">Trecho de Código 1.1 - </span><span class="caption-text"><a class="reference download internal" download="" href="../_downloads/5342343c142ebd11d9a9991158298817/glebas-2024-subconjunto.csv"><code class="xref download docutils literal notranslate"><span class="pre">glebas-2024-subconjunto.csv</span></code></a>.</span><a class="headerlink" href="#data-sql-glebas-2024-subconjunto" title="Link Permanente para esse código"></a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#REF_BACEN;NU_ORDEM;NU_INDICE;GT_GEOMETRIA</span>
<span class="mi">517254553</span><span class="p">;</span><span class="mi">1</span><span class="p">;</span><span class="mi">0</span><span class="p">;</span><span class="n">POLYGON</span> <span class="p">((</span><span class="o">-</span><span class="mf">43.902034</span> <span class="o">-</span><span class="mf">21.309695999999899</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">43.90041</span> <span class="o">-</span><span class="mf">21.308319</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">43.898786999999899</span> <span class="o">-</span><span class="mf">21.306943</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">43.89898</span> <span class="o">-</span><span class="mf">21.30575</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">43.899172</span> <span class="o">-</span><span class="mf">21.304557</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">43.900615</span> <span class="o">-</span><span class="mf">21.305241</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">43.902057</span> <span class="o">-</span><span class="mf">21.305924</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">43.902152</span> <span class="o">-</span><span class="mf">21.306318</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">43.902247</span> <span class="o">-</span><span class="mf">21.306712</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">43.902342</span> <span class="o">-</span><span class="mf">21.307106</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">43.902437</span> <span class="o">-</span><span class="mf">21.3075</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">43.902034</span> <span class="o">-</span><span class="mf">21.309695999999899</span> <span class="mi">0</span><span class="p">))</span>
<span class="mi">517254555</span><span class="p">;</span><span class="mi">1</span><span class="p">;</span><span class="mi">0</span><span class="p">;</span><span class="n">POLYGON</span> <span class="p">((</span><span class="o">-</span><span class="mf">49.406416</span> <span class="o">-</span><span class="mf">15.845366</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">49.406251</span> <span class="o">-</span><span class="mf">15.846175</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">49.406311</span> <span class="o">-</span><span class="mf">15.846967</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">49.406327</span> <span class="o">-</span><span class="mf">15.847805</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">49.405669</span> <span class="o">-</span><span class="mf">15.847882</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">49.404994</span> <span class="o">-</span><span class="mf">15.847869</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">49.404335</span> <span class="o">-</span><span class="mf">15.847872</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">49.403678</span> <span class="o">-</span><span class="mf">15.847847</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">49.403047</span> <span class="o">-</span><span class="mf">15.847823</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">49.40297</span> <span class="o">-</span><span class="mf">15.845221</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">49.406416</span> <span class="o">-</span><span class="mf">15.845366</span> <span class="mi">0</span><span class="p">))</span>
<span class="mi">517254557</span><span class="p">;</span><span class="mi">1</span><span class="p">;</span><span class="mi">0</span><span class="p">;</span><span class="n">POLYGON</span> <span class="p">((</span><span class="o">-</span><span class="mf">62.420199</span> <span class="o">-</span><span class="mf">10.651255</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.420073</span> <span class="o">-</span><span class="mf">10.65143</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.41997</span> <span class="o">-</span><span class="mf">10.65159</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.419887</span> <span class="o">-</span><span class="mf">10.651774</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.419804</span> <span class="o">-</span><span class="mf">10.652062</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.41973</span> <span class="o">-</span><span class="mf">10.652269</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.419648</span> <span class="o">-</span><span class="mf">10.652388</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.419449</span> <span class="o">-</span><span class="mf">10.652637</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.41927</span> <span class="o">-</span><span class="mf">10.652819</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.419156</span> <span class="o">-</span><span class="mf">10.652982</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.419022</span> <span class="o">-</span><span class="mf">10.653222</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.418862</span> <span class="o">-</span><span class="mf">10.653378</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.418493</span> <span class="o">-</span><span class="mf">10.653694</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.41817</span> <span class="o">-</span><span class="mf">10.653956</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.417853</span> <span class="o">-</span><span class="mf">10.654275</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.416715</span> <span class="o">-</span><span class="mf">10.653373</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.415766</span> <span class="o">-</span><span class="mf">10.652611</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.415485</span> <span class="o">-</span><span class="mf">10.652344</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.415586</span> <span class="o">-</span><span class="mf">10.65204</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.4157</span> <span class="o">-</span><span class="mf">10.651831</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.415747</span> <span class="o">-</span><span class="mf">10.651675</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.415793</span> <span class="o">-</span><span class="mf">10.651568</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.415876</span> <span class="o">-</span><span class="mf">10.651453</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.416019</span> <span class="o">-</span><span class="mf">10.651198</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.416251</span> <span class="o">-</span><span class="mf">10.650926</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.416422</span> <span class="o">-</span><span class="mf">10.650894</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.41661</span> <span class="o">-</span><span class="mf">10.650804</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.416699</span> <span class="o">-</span><span class="mf">10.650682</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.416753</span> <span class="o">-</span><span class="mf">10.650447</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.416723</span> <span class="o">-</span><span class="mf">10.650269</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.416601</span> <span class="o">-</span><span class="mf">10.650093</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.416297</span> <span class="o">-</span><span class="mf">10.649946</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.416095</span> <span class="o">-</span><span class="mf">10.649979</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.415919</span> <span class="o">-</span><span class="mf">10.65011</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.415839</span> <span class="o">-</span><span class="mf">10.650227</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.415796</span> <span class="o">-</span><span class="mf">10.650383</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.415486</span> <span class="o">-</span><span class="mf">10.650751</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.415256</span> <span class="o">-</span><span class="mf">10.651139</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.415105</span> <span class="o">-</span><span class="mf">10.651426</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.415071</span> <span class="o">-</span><span class="mf">10.651535</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.414964</span> <span class="o">-</span><span class="mf">10.651633</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.414955</span> <span class="o">-</span><span class="mf">10.651764</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.414883</span> <span class="o">-</span><span class="mf">10.651885</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.414273</span> <span class="o">-</span><span class="mf">10.651385</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.413518</span> <span class="o">-</span><span class="mf">10.650769</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.413696</span> <span class="o">-</span><span class="mf">10.650582</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.413967</span> <span class="o">-</span><span class="mf">10.650394</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.414198</span> <span class="o">-</span><span class="mf">10.650153</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.414349</span> <span class="o">-</span><span class="mf">10.649975</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.414591</span> <span class="o">-</span><span class="mf">10.649637</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.414907</span> <span class="o">-</span><span class="mf">10.649308</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.415441</span> <span class="o">-</span><span class="mf">10.648888</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.415825</span> <span class="o">-</span><span class="mf">10.648517</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.416056</span> <span class="o">-</span><span class="mf">10.648325</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.416266</span> <span class="o">-</span><span class="mf">10.648118</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.416375</span> <span class="o">-</span><span class="mf">10.648104</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.417325</span> <span class="o">-</span><span class="mf">10.648942</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.418916</span> <span class="o">-</span><span class="mf">10.650218</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.419201</span> <span class="o">-</span><span class="mf">10.650453</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.419812</span> <span class="o">-</span><span class="mf">10.65092</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">62.420199</span> <span class="o">-</span><span class="mf">10.651255</span> <span class="mi">0</span><span class="p">))</span>
<span class="mi">517254558</span><span class="p">;</span><span class="mi">1</span><span class="p">;</span><span class="mi">0</span><span class="p">;</span><span class="n">POLYGON</span> <span class="p">((</span><span class="o">-</span><span class="mf">47.621074</span> <span class="o">-</span><span class="mf">23.734939</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">47.620834</span> <span class="o">-</span><span class="mf">23.73527</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">47.620592</span> <span class="o">-</span><span class="mf">23.735756</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">47.619826</span> <span class="o">-</span><span class="mf">23.736261</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">47.618565</span> <span class="o">-</span><span class="mf">23.737299</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">47.618107</span> <span class="o">-</span><span class="mf">23.736539</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">47.619078</span> <span class="o">-</span><span class="mf">23.735883</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">47.618975</span> <span class="o">-</span><span class="mf">23.735738</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">47.618813</span> <span class="o">-</span><span class="mf">23.735433</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">47.618819</span> <span class="o">-</span><span class="mf">23.735323</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">47.618948</span> <span class="o">-</span><span class="mf">23.734881999999899</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">47.621517</span> <span class="o">-</span><span class="mf">23.734656</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">47.621074</span> <span class="o">-</span><span class="mf">23.734939</span> <span class="mi">0</span><span class="p">))</span>
<span class="mi">517254563</span><span class="p">;</span><span class="mi">1</span><span class="p">;</span><span class="mi">0</span><span class="p">;</span><span class="n">POLYGON</span> <span class="p">((</span><span class="o">-</span><span class="mf">55.290694</span> <span class="o">-</span><span class="mf">23.89695</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">55.288356</span> <span class="o">-</span><span class="mf">23.89928</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">55.286018</span> <span class="o">-</span><span class="mf">23.901611</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">55.285032</span> <span class="o">-</span><span class="mf">23.900872</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">55.28454</span> <span class="o">-</span><span class="mf">23.900503</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">55.284047</span> <span class="o">-</span><span class="mf">23.900134</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">55.285116</span> <span class="o">-</span><span class="mf">23.899145</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">55.286185</span> <span class="o">-</span><span class="mf">23.898156</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">55.287254</span> <span class="o">-</span><span class="mf">23.897167</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">55.288323</span> <span class="o">-</span><span class="mf">23.896178</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">55.289508</span> <span class="o">-</span><span class="mf">23.896564</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">55.290694</span> <span class="o">-</span><span class="mf">23.89695</span> <span class="mi">0</span><span class="p">))</span>
<span class="mi">517254564</span><span class="p">;</span><span class="mi">1</span><span class="p">;</span><span class="mi">0</span><span class="p">;</span><span class="n">POLYGON</span> <span class="p">((</span><span class="o">-</span><span class="mf">36.458228</span> <span class="o">-</span><span class="mf">9.08855</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">36.458088</span> <span class="o">-</span><span class="mf">9.088049</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">36.458134999999899</span> <span class="o">-</span><span class="mf">9.087302</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">36.458305</span> <span class="o">-</span><span class="mf">9.086873</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">36.460358</span> <span class="o">-</span><span class="mf">9.087847</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">36.460551</span> <span class="o">-</span><span class="mf">9.088001</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">36.460204</span> <span class="o">-</span><span class="mf">9.088266</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">36.459961</span> <span class="o">-</span><span class="mf">9.088575</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">36.45982</span> <span class="o">-</span><span class="mf">9.08883</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">36.459644</span> <span class="o">-</span><span class="mf">9.089371</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">36.459839</span> <span class="o">-</span><span class="mf">9.090408</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">36.459264</span> <span class="o">-</span><span class="mf">9.089842</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">36.458593</span> <span class="o">-</span><span class="mf">9.089071</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">36.458228</span> <span class="o">-</span><span class="mf">9.08855</span> <span class="mi">0</span><span class="p">))</span>
<span class="mi">517254568</span><span class="p">;</span><span class="mi">1</span><span class="p">;</span><span class="mi">0</span><span class="p">;</span><span class="n">POLYGON</span> <span class="p">((</span><span class="o">-</span><span class="mf">42.110267</span> <span class="o">-</span><span class="mf">11.252986</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">42.108296</span> <span class="o">-</span><span class="mf">11.253158</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">42.10797</span> <span class="o">-</span><span class="mf">11.252483</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">42.107637</span> <span class="o">-</span><span class="mf">11.252058</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">42.107678</span> <span class="o">-</span><span class="mf">11.251791</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">42.10772</span> <span class="o">-</span><span class="mf">11.251523</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">42.107871</span> <span class="o">-</span><span class="mf">11.251082</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">42.108022</span> <span class="o">-</span><span class="mf">11.250641</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">42.108529</span> <span class="o">-</span><span class="mf">11.250789</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">42.109036</span> <span class="o">-</span><span class="mf">11.250938</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">42.11037</span> <span class="o">-</span><span class="mf">11.250975</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">42.110267</span> <span class="o">-</span><span class="mf">11.252986</span> <span class="mi">0</span><span class="p">))</span>
<span class="mi">517254568</span><span class="p">;</span><span class="mi">2</span><span class="p">;</span><span class="mi">0</span><span class="p">;</span><span class="n">POLYGON</span> <span class="p">((</span><span class="o">-</span><span class="mf">42.110267</span> <span class="o">-</span><span class="mf">11.252986</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">42.108296</span> <span class="o">-</span><span class="mf">11.253158</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">42.10797</span> <span class="o">-</span><span class="mf">11.252483</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">42.107637</span> <span class="o">-</span><span class="mf">11.252058</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">42.107678</span> <span class="o">-</span><span class="mf">11.251791</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">42.10772</span> <span class="o">-</span><span class="mf">11.251523</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">42.107871</span> <span class="o">-</span><span class="mf">11.251082</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">42.108022</span> <span class="o">-</span><span class="mf">11.250641</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">42.108529</span> <span class="o">-</span><span class="mf">11.250789</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">42.109036</span> <span class="o">-</span><span class="mf">11.250938</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">42.11037</span> <span class="o">-</span><span class="mf">11.250975</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">42.110267</span> <span class="o">-</span><span class="mf">11.252986</span> <span class="mi">0</span><span class="p">))</span>
<span class="mi">517254570</span><span class="p">;</span><span class="mi">1</span><span class="p">;</span><span class="mi">0</span><span class="p">;</span><span class="n">POLYGON</span> <span class="p">((</span><span class="o">-</span><span class="mf">50.082767</span> <span class="o">-</span><span class="mf">15.335757</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.08392</span> <span class="o">-</span><span class="mf">15.339846</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.082349</span> <span class="o">-</span><span class="mf">15.339943</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.082157</span> <span class="o">-</span><span class="mf">15.340231</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.081835</span> <span class="o">-</span><span class="mf">15.340382</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.081611</span> <span class="o">-</span><span class="mf">15.340109</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.081518</span> <span class="o">-</span><span class="mf">15.339881</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.08134</span> <span class="o">-</span><span class="mf">15.339756</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.080969</span> <span class="o">-</span><span class="mf">15.339759</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.08089</span> <span class="o">-</span><span class="mf">15.339414</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.080771</span> <span class="o">-</span><span class="mf">15.339335</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.080738</span> <span class="o">-</span><span class="mf">15.33908</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.080461</span> <span class="o">-</span><span class="mf">15.339047</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.080257</span> <span class="o">-</span><span class="mf">15.33885</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.080127</span> <span class="o">-</span><span class="mf">15.338278</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.079809</span> <span class="o">-</span><span class="mf">15.338278</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.07938</span> <span class="o">-</span><span class="mf">15.338172</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.078913</span> <span class="o">-</span><span class="mf">15.337195</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.07964</span> <span class="o">-</span><span class="mf">15.336971</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.080047</span> <span class="o">-</span><span class="mf">15.336793</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.080515</span> <span class="o">-</span><span class="mf">15.336557</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.080796</span> <span class="o">-</span><span class="mf">15.336559</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.081031</span> <span class="o">-</span><span class="mf">15.336334</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.081094</span> <span class="o">-</span><span class="mf">15.336121</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.081662</span> <span class="o">-</span><span class="mf">15.33573</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.081971</span> <span class="o">-</span><span class="mf">15.335648</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.082388</span> <span class="o">-</span><span class="mf">15.335649</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">50.082767</span> <span class="o">-</span><span class="mf">15.335757</span> <span class="mi">0</span><span class="p">))</span>
<span class="mi">517254572</span><span class="p">;</span><span class="mi">1</span><span class="p">;</span><span class="mi">0</span><span class="p">;</span><span class="n">POLYGON</span> <span class="p">((</span><span class="o">-</span><span class="mf">49.957618</span> <span class="o">-</span><span class="mf">19.52558</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">49.953671</span> <span class="o">-</span><span class="mf">19.528482</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">49.949725</span> <span class="o">-</span><span class="mf">19.531385</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">49.946955</span> <span class="o">-</span><span class="mf">19.530209</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">49.94557</span> <span class="o">-</span><span class="mf">19.52962</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">49.944185</span> <span class="o">-</span><span class="mf">19.529032</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">49.946213</span> <span class="o">-</span><span class="mf">19.527215</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">49.948241</span> <span class="o">-</span><span class="mf">19.525398</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">49.950269</span> <span class="o">-</span><span class="mf">19.523581</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">49.952297</span> <span class="o">-</span><span class="mf">19.521765</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">49.954957</span> <span class="o">-</span><span class="mf">19.523672</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">49.957618</span> <span class="o">-</span><span class="mf">19.52558</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Os dados apresentados nesse arquivo foram extraídos do <a class="reference external" href="https://www.bcb.gov.br/estabilidadefinanceira/tabelas-credito-rural-proagro/">Portal do Banco Central do Brasil - Tabelas e Microdados do Crédito Rural e do Proagro</a>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>O arquivo CSV completo com dados de 2024 pode ser baixado do seguinte link <a class="reference download external" download="" href="https://www.bcb.gov.br/htms/sicor/DadosBrutos/sicor_glebas_wkt_2024.gz"><code class="xref download docutils literal notranslate"><span class="pre">sicor_glebas_wkt_2024.gz</span></code></a>.</p>
</div>
<p>Repare que esse arquivo possui uma primeira linha com um cabeçalho, indicando as colunas presentes:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>#REF_BACEN;NU_ORDEM;NU_INDICE;GT_GEOMETRIA
</pre></div>
</div>
<p>Os campos encontram-se separados pelo caractere <code class="docutils literal notranslate"><span class="pre">;</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>517254553;1;0;POLYGON ((-43.902034 -21.309695999999899, ...))
</pre></div>
</div>
<p>Para importar esse arquivo para o banco de dados usando o comando <code class="docutils literal notranslate"><span class="pre">COPY</span></code> ou o metacomando <code class="docutils literal notranslate"><span class="pre">\copy</span></code>, primeiro devemos criar uma tabela capaz de armazenar esses dados:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">glebas</span>
<span class="p">(</span>
<span class="w">    </span><span class="n">ref_bacen</span><span class="w">    </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="n">nu_ordem</span><span class="w">     </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="n">nu_indice</span><span class="w">    </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">    </span><span class="n">geom</span><span class="w">         </span><span class="n">GEOMETRY</span><span class="p">(</span><span class="n">POLYGONZ</span><span class="p">,</span><span class="w"> </span><span class="mi">4674</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Repare que não incluímos restrições na definição da tabela acima. Além disso, definimos nomes para os campos diferente dos que aparecem no cabeçalho do arquivo CSV.</p>
</div>
<section id="comando-copy">
<h3><span class="section-number">1.11.1.1. </span>Comando <code class="docutils literal notranslate"><span class="pre">COPY</span></code><a class="headerlink" href="#comando-copy" title="Link permanente para este cabeçalho"></a></h3>
<p>Para copiar o arquivo acima para a nova tabela criada, podemos utilizar o comando <code class="docutils literal notranslate"><span class="pre">COPY</span></code> indicando na cláusula <code class="docutils literal notranslate"><span class="pre">FROM</span></code> o caminho completo para que o servidor encontre o arquivo de dados, como mostrado abaixo:</p>
<div class="highlight-postgresql notranslate"><div class="highlight"><pre><span></span><span class="k">COPY</span><span class="w"> </span><span class="n">glebas</span><span class="p">(</span><span class="n">ref_bacen</span><span class="p">,</span><span class="w"> </span><span class="n">nu_ordem</span><span class="p">,</span><span class="w"> </span><span class="n">nu_indice</span><span class="p">,</span><span class="w"> </span><span class="n">geom</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="s1">&#39;/data/glebas-2024-subconjunto.csv&#39;</span>
<span class="k">WITH</span><span class="w"> </span><span class="p">(</span><span class="k">DELIMITER</span><span class="w"> </span><span class="s1">&#39;;&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">FORMAT</span><span class="w"> </span><span class="k">CSV</span><span class="p">,</span><span class="w"> </span><span class="k">HEADER</span><span class="w"> </span><span class="k">true</span><span class="p">);</span>
</pre></div>
</div>
<p>Resultado:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>COPY 50
</pre></div>
</div>
<p>No comando acima o nome da tabela para onde importaremos o dado é especificado logo após a palavra-chave <code class="docutils literal notranslate"><span class="pre">COPY</span></code>. Se a tabela possuir colunas com tipos compatíveis com a mesma estrutura do arquivo CSV, então podemos omitir a lista de colunas, caso contrário, as colunas para as quais copiaremos os dados deverão aperecer entre parênteses. O caminho do arquivo CSV é colocado logo após a palavra-chave <code class="docutils literal notranslate"><span class="pre">FROM</span></code>. Ao final do comando podemos especificar algumas opções, tais como: o delimitador de valores usado no arquivo (<code class="docutils literal notranslate"><span class="pre">;</span></code>), o formato do arquivo (<code class="docutils literal notranslate"><span class="pre">CSV</span></code>) e a presença de uma linha de cabeçalho no início do arquivo (<code class="docutils literal notranslate"><span class="pre">HEADER</span></code>).</p>
<p>Se o comando acima for bem sucedido, você receberá uma mensagem indicando que <code class="docutils literal notranslate"><span class="pre">50</span></code> linhas foram copiadas para a tabela <code class="docutils literal notranslate"><span class="pre">glebas</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>O exemplo acima também poderia ser realizado sem especificar as colunas da tabela de destino:</p>
<div class="highlight-postgresql notranslate"><div class="highlight"><pre><span></span><span class="k">COPY</span><span class="w"> </span><span class="n">glebas</span>
<span class="k">FROM</span><span class="w"> </span><span class="s1">&#39;/data/glebas-2024-subconjunto.csv&#39;</span>
<span class="k">WITH</span><span class="w"> </span><span class="p">(</span><span class="k">DELIMITER</span><span class="w"> </span><span class="s1">&#39;;&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">FORMAT</span><span class="w"> </span><span class="k">CSV</span><span class="p">,</span><span class="w"> </span><span class="k">HEADER</span><span class="w"> </span><span class="k">true</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Dica</p>
<p>Para saber mais sobre o comando <code class="docutils literal notranslate"><span class="pre">COPY</span></code>, consulte o manual do PostgreSQL na Seção <a class="reference external" href="https://www.postgresql.org/docs/16/sql-copy.html">COPY</a>.</p>
</div>
</section>
<section id="usando-o-meta-comando-copy">
<h3><span class="section-number">1.11.1.2. </span>Usando o Meta-comando <code class="docutils literal notranslate"><span class="pre">\copy</span></code><a class="headerlink" href="#usando-o-meta-comando-copy" title="Link permanente para este cabeçalho"></a></h3>
<p>Um detalhe importante sobre o comando <code class="docutils literal notranslate"><span class="pre">COPY</span></code> é que o arquivo de dados informado será lido pelo servidor PostgreSQL e, portanto, deve estar em um caminho acessível por ele. Isso significa que o arquivo precisa estar num sistema de arquivos acessível pelo servidor e que o usuário que executa o processo do servidor PostgreSQL precisará ter privilégios de leitura tanto no diretório quanto no arquivo de dados. Para relaxar essa restrição, as aplicações clientes, como o <em>psql</em> e o <em>pgAdmin</em>, utilizam uma variante desse comando que realiza a leitura e escrita para a entrada/saída padrão (<code class="docutils literal notranslate"><span class="pre">COPY</span> <span class="pre">FROM</span> <span class="pre">STDIN</span></code> ou <code class="docutils literal notranslate"><span class="pre">COPY</span> <span class="pre">TO</span> <span class="pre">STDOUT</span></code>).</p>
<p>No caso do psql, ele fornece um meta-comando chamado <code class="docutils literal notranslate"><span class="pre">\copy</span></code> que pode ser usado de maneira análoga ao comando <code class="docutils literal notranslate"><span class="pre">COPY</span></code>. A diferença essencial é que o <code class="docutils literal notranslate"><span class="pre">\copy</span></code> realiza a leitura do arquivo no lado cliente, isto é, onde o <em>psql</em> é executado, e este é que de fato envia os dados pela rede de comunicação com o servidor PostgreSQL usando nos bastidores o comando <code class="docutils literal notranslate"><span class="pre">COPY</span> <span class="pre">FROM</span> <span class="pre">STDIN</span></code>. Portanto, o exemplo da seção anterior poderia ser construído com o <em>psql</em> da seguinte forma:</p>
<div class="highlight-psql notranslate"><div class="highlight"><pre><span></span><span class="kp">\copy</span><span class="w"> </span><span class="ss">glebas</span><span class="w"> </span><span class="ss">FROM</span><span class="w"> </span><span class="s1">&#39;/data/glebas-2024-subconjunto.csv&#39;</span><span class="w"> </span><span class="ss">WITH</span><span class="w"> </span><span class="ss">(DELIMITER</span><span class="w"> </span><span class="s1">&#39;;&#39;</span><span class="ss">,</span><span class="w"> </span><span class="ss">FORMAT</span><span class="w"> </span><span class="ss">CSV,</span><span class="w"> </span><span class="ss">HEADER);</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Dica</p>
<p>Uma forma simples de limpar o conteúdo de uma tabela é usar o comando <code class="docutils literal notranslate"><span class="pre">TRUNCATE</span> <span class="pre">TABLE</span></code>, como mostrado abaixo:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">TRUNCATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">glebas</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Dica</p>
<p>Para saber mais sobre o meta-comando <code class="docutils literal notranslate"><span class="pre">\copy</span></code>, veja o <a class="reference external" href="https://www.postgresql.org/docs/16/app-psql.html">manual do psql</a>.</p>
</div>
</section>
<section id="importando-dados-pelo-pgadmin">
<h3><span class="section-number">1.11.1.3. </span>Importando Dados pelo pgAdmin<a class="headerlink" href="#importando-dados-pelo-pgadmin" title="Link permanente para este cabeçalho"></a></h3>
<p>Pela interface gráfica do pgAdmin é possível importar arquivos CSV. Ao selecionar a tabela para a qual se deseja copiar os dados, selecione o menu <code class="docutils literal notranslate"><span class="pre">Import/Export</span> <span class="pre">Data...</span></code>, como mostrado na figura abaixo:</p>
<figure class="align-center align-default" id="fig-sql-import-export-import-csv-01">
<a class="reference internal image-reference" href="../_images/import-csv-01.png"><img alt="Importando dados para a tabela focos" src="../_images/import-csv-01.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-number">Figura 1.12 - </span><span class="caption-text">Importando dados para a tabela <code class="docutils literal notranslate"><span class="pre">glebas</span></code>.</span><a class="headerlink" href="#fig-sql-import-export-import-csv-01" title="Link Permanente para essa imagem"></a></p>
</figcaption>
</figure>
<p>Na janela aberta, com a opção <code class="docutils literal notranslate"><span class="pre">Import</span></code> selecionada, devemos indicar o arquivo a ser carregado:</p>
<figure class="align-center align-default" id="fig-sql-import-export-import-csv-02">
<a class="reference internal image-reference" href="../_images/import-csv-02.png"><img alt="Importando dados para a tabela focos" src="../_images/import-csv-02.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-number">Figura 1.13 - </span><span class="caption-text">Importando dados para a tabela <code class="docutils literal notranslate"><span class="pre">glebas</span></code>.</span><a class="headerlink" href="#fig-sql-import-export-import-csv-02" title="Link Permanente para essa imagem"></a></p>
</figcaption>
</figure>
<p>O arquivo pode ser indicado de diversas formas. Uma delas consiste em fazer o <em>upload</em> do arquivo:</p>
<figure class="align-center align-default" id="fig-sql-import-export-import-csv-03">
<a class="reference internal image-reference" href="../_images/import-csv-03.png"><img alt="Fazendo o upload de um arquivo CSV" src="../_images/import-csv-03.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-number">Figura 1.14 - </span><span class="caption-text">Importando dados para a tabela <code class="docutils literal notranslate"><span class="pre">glebas</span></code>.</span><a class="headerlink" href="#fig-sql-import-export-import-csv-03" title="Link Permanente para essa imagem"></a></p>
</figcaption>
</figure>
<figure class="align-center align-default" id="fig-sql-import-export-import-csv-04">
<a class="reference internal image-reference" href="../_images/import-csv-04.png"><img alt="Fazendo o upload de um arquivo CSV" src="../_images/import-csv-04.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-number">Figura 1.15 - </span><span class="caption-text">Importando dados para a tabela <code class="docutils literal notranslate"><span class="pre">glebas</span></code>.</span><a class="headerlink" href="#fig-sql-import-export-import-csv-04" title="Link Permanente para essa imagem"></a></p>
</figcaption>
</figure>
<figure class="align-center align-default" id="fig-sql-import-export-import-csv-05">
<a class="reference internal image-reference" href="../_images/import-csv-05.png"><img alt="Fazendo o upload de um arquivo CSV" src="../_images/import-csv-05.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-number">Figura 1.16 - </span><span class="caption-text">Importando dados para a tabela <code class="docutils literal notranslate"><span class="pre">glebas</span></code>.</span><a class="headerlink" href="#fig-sql-import-export-import-csv-05" title="Link Permanente para essa imagem"></a></p>
</figcaption>
</figure>
<figure class="align-center align-default" id="fig-sql-import-export-import-csv-06">
<a class="reference internal image-reference" href="../_images/import-csv-06.png"><img alt="Fazendo o upload de um arquivo CSV" src="../_images/import-csv-06.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-number">Figura 1.17 - </span><span class="caption-text">Importando dados para a tabela <code class="docutils literal notranslate"><span class="pre">glebas</span></code>.</span><a class="headerlink" href="#fig-sql-import-export-import-csv-06" title="Link Permanente para essa imagem"></a></p>
</figcaption>
</figure>
<figure class="align-center align-default" id="fig-sql-import-export-import-csv-07">
<a class="reference internal image-reference" href="../_images/import-csv-07.png"><img alt="Fazendo o upload de um arquivo CSV" src="../_images/import-csv-07.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-number">Figura 1.18 - </span><span class="caption-text">Importando dados para a tabela <code class="docutils literal notranslate"><span class="pre">glebas</span></code>.</span><a class="headerlink" href="#fig-sql-import-export-import-csv-07" title="Link Permanente para essa imagem"></a></p>
</figcaption>
</figure>
<figure class="align-center align-default" id="fig-sql-import-export-import-csv-08">
<a class="reference internal image-reference" href="../_images/import-csv-08.png"><img alt="Fazendo o upload de um arquivo CSV" src="../_images/import-csv-08.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-number">Figura 1.19 - </span><span class="caption-text">Importando dados para a tabela <code class="docutils literal notranslate"><span class="pre">glebas</span></code>.</span><a class="headerlink" href="#fig-sql-import-export-import-csv-08" title="Link Permanente para essa imagem"></a></p>
</figcaption>
</figure>
<figure class="align-center align-default" id="fig-sql-import-export-import-csv-09">
<a class="reference internal image-reference" href="../_images/import-csv-09.png"><img alt="Fazendo o upload de um arquivo CSV" src="../_images/import-csv-09.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-number">Figura 1.20 - </span><span class="caption-text">Importando dados para a tabela <code class="docutils literal notranslate"><span class="pre">glebas</span></code>.</span><a class="headerlink" href="#fig-sql-import-export-import-csv-09" title="Link Permanente para essa imagem"></a></p>
</figcaption>
</figure>
</section>
</section>
<section id="exportando-para-arquivos-csv">
<h2><span class="section-number">1.11.2. </span>Exportando para Arquivos CSV<a class="headerlink" href="#exportando-para-arquivos-csv" title="Link permanente para este cabeçalho"></a></h2>
<p>Vamos usar o meta-comando <code class="docutils literal notranslate"><span class="pre">\copy</span></code> para exportar os dados da tabela <code class="docutils literal notranslate"><span class="pre">glebas</span></code> para um arquivo denominado <code class="docutils literal notranslate"><span class="pre">/data/glebas.csv</span></code>, onde a primeira linha será de cabeçalho e os valores em cada uma das linhas exportadas serão separados por <code class="docutils literal notranslate"><span class="pre">;</span></code>:</p>
<div class="highlight-psql notranslate"><div class="highlight"><pre><span></span><span class="kp">\copy</span><span class="w"> </span><span class="ss">glebas</span><span class="w"> </span><span class="ss">TO</span><span class="w"> </span><span class="s1">&#39;/data/glebas.csv&#39;</span><span class="w"> </span><span class="ss">WITH</span><span class="w"> </span><span class="ss">(DELIMITER</span><span class="w"> </span><span class="s1">&#39;;&#39;</span><span class="ss">,</span><span class="w"> </span><span class="ss">FORMAT</span><span class="w"> </span><span class="ss">CSV,</span><span class="w"> </span><span class="ss">HEADER</span><span class="w"> </span><span class="ss">true);</span>
</pre></div>
</div>
<p>Resultado:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>COPY 50
</pre></div>
</div>
<p>Podemos também exportar o resultado de uma consulta:</p>
<div class="highlight-psql notranslate"><div class="highlight"><pre><span></span><span class="kp">\copy</span><span class="w"> </span><span class="ss">(SELECT</span><span class="w"> </span><span class="ss">ref_bacen,</span><span class="w"> </span><span class="ss">nu_ordem,</span><span class="w"> </span><span class="ss">nu_indice,</span><span class="w"> </span><span class="ss">ST_AsText(ST_Force2D(geom))</span><span class="w"> </span><span class="ss">FROM</span><span class="w"> </span><span class="ss">glebas</span><span class="w"> </span><span class="ss">WHERE</span><span class="w"> </span><span class="ss">ref_bacen</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="s1">&#39;517254582&#39;</span><span class="ss">)</span><span class="w"> </span><span class="ss">TO</span><span class="w"> </span><span class="s1">&#39;/data/gleba-517254582.csv&#39;</span><span class="w"> </span><span class="ss">WITH</span><span class="w"> </span><span class="ss">(DELIMITER</span><span class="w"> </span><span class="s1">&#39;;&#39;</span><span class="ss">,</span><span class="w"> </span><span class="ss">FORMAT</span><span class="w"> </span><span class="ss">CSV,</span><span class="w"> </span><span class="ss">HEADER</span><span class="w"> </span><span class="ss">true);</span>
</pre></div>
</div>
<p>Resultado:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>COPY 1
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Rodapé">
        <a href="consultas.html" class="btn btn-neutral float-left" title="1.10. Consultas em SQL" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Anterior</a>
        <a href="consideracoes.html" class="btn btn-neutral float-right" title="1.12. Considerações Finais" accesskey="n" rel="next">Próximo <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Time.</p>
  </div>

  
<jinja2.runtime.BlockReference object at 0x7f66c36e8a00>
<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://mirrors.creativecommons.org/presskit/buttons/88x31/png/by-nc-sa.png" width="117" height="41"/></a> This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons “Attribution-NonCommercial-ShareAlike 4.0 International” license</a>.


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>