<!DOCTYPE html>
<html class="writer-html5" lang="pt-BR" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1.8. Criando Tabelas &mdash; GeoCreditoRural</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/table_styling.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tutorial.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://geo-credito-rural.github.io/sql/criando-tabelas.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/translations.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Buscar" href="../search.html" />
    <link rel="next" title="1.9. Inserindo Dados" href="inserindo-dados.html" />
    <link rel="prev" title="1.7. PostGIS Geometry" href="postgis-geometry.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #F0F8FF" >

          
          
          <a href="../index.html" class="icon icon-home">
            GeoCreditoRural
              <img src="../_static/logo.jpeg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Pesquisar documentos" aria-label="Pesquisar documentos" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Menu de navegação">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Monitoramento de Operações de Crédito Rural por meio de Geotecnologias</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Aulas:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">1. Introdução à Linguagem de Consulta SQL</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="instalacao.html">1.1. Instalação do Servidor PostgreSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="conectando-bd.html">1.2. Conectando ao Servidor PostgreSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="criando-bd.html">1.3. Criando um Novo Banco de Dados no PostgreSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="tabelas.html">1.4. Conceitos do Modelo Relacional</a></li>
<li class="toctree-l2"><a class="reference internal" href="tipos-dados.html">1.5. Tipos de Dados SQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="tipos-geometricos.html">1.6. Tipos Geométricos</a></li>
<li class="toctree-l2"><a class="reference internal" href="postgis-geometry.html">1.7. PostGIS Geometry</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.8. Criando Tabelas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#exemplo-criacao-de-tabela">1.8.1. Exemplo Criação de Tabela</a></li>
<li class="toctree-l3"><a class="reference internal" href="#estudo-de-caso">1.8.2. Estudo de Caso</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="inserindo-dados.html">1.9. Inserindo Dados</a></li>
<li class="toctree-l2"><a class="reference internal" href="consultas.html">1.10. Consultas em SQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="import-export.html">1.11. Importando e Exportando Dados</a></li>
<li class="toctree-l2"><a class="reference internal" href="consideracoes.html">1.12. Considerações Finais</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../jupyter/index.html">2. Ambiente de Computação Interativa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sicor/index.html">3. Dados do Sicor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bases-vetoriais/index.html">4. Impedimentos Sociais, Ambientais e Climáticos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uso-cobertura-terra/index.html">5. Uso e Cobertura da Terra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acesso-imagens/index.html">6. Imagens de Satélites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../series-temporais/index.html">7. Séries Temporais de Imagens de Satélites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fenologia/index.html">8. Fenologia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../padroes-series-temporais/index.html">9. Padrões em Séries Temporais de Imagens de Satélites</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Referências Bibliográficas</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../referencias.html">Referências Bibliográficas</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Informações Gerais:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../licenca.html">Licença</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agradecimentos.html">Agradecimentos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Índice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossário</a></li>
<li class="toctree-l1"><a class="reference internal" href="../search.html">Página de Busca</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Menu de navegação móvel"  style="background: #F0F8FF" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GeoCreditoRural</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Navegação da página">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">1. </span>Introdução à Linguagem de Consulta SQL</a></li>
      <li class="breadcrumb-item active"><span class="section-number">1.8. </span>Criando Tabelas</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Navegação sequencial da página">
        <a href="postgis-geometry.html" class="btn btn-neutral float-left" title="1.7. PostGIS Geometry" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Anterior</a>
        <a href="inserindo-dados.html" class="btn btn-neutral float-right" title="1.9. Inserindo Dados" accesskey="n">Próximo <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="criando-tabelas">
<span id="sec-sql-criando-tabelas"></span><h1><span class="section-number">1.8. </span>Criando Tabelas<a class="headerlink" href="#criando-tabelas" title="Link permanente para este cabeçalho"></a></h1>
<p>O comando SQL <code class="code highlight sql docutils literal highlight-sql"><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span></code> permite criar novas tabelas no banco de dados. A sintaxe básica desse comando é mostrada abaixo:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>CREATE TABLE &lt;nome-tabela&gt;
(
    &lt;nome-coluna&gt; &lt;tipo-dados&gt; [&lt;restrição-coluna&gt;]
    [, &lt;nome-coluna&gt; &lt;tipo-dados&gt; [&lt;restrição-coluna&gt;] ]
    [, &lt;restrição-tabela&gt; [, &lt;restrição-tabela&gt; ] ]
);
</pre></div>
</div>
<p>Onde:</p>
<ul class="open">
<li><p><code class="docutils literal notranslate"><span class="pre">nome-tabela</span></code>: O nome de uma tabela deve começar por uma letra (<code class="docutils literal notranslate"><span class="pre">a-z</span></code>) ou pelo caracter sublinhado <code class="docutils literal notranslate"><span class="pre">_</span></code>, e os demais caracteres podem ser letras, dígitos (<code class="docutils literal notranslate"><span class="pre">0-9</span></code>) ou o caracter sublinhado <code class="docutils literal notranslate"><span class="pre">_</span></code>. Alguns exemplos de nomes válidos são: <code class="docutils literal notranslate"><span class="pre">foco</span></code>, <code class="docutils literal notranslate"><span class="pre">foco_v2</span></code>, <code class="docutils literal notranslate"><span class="pre">estudante_disciplina</span></code>, <code class="docutils literal notranslate"><span class="pre">populacao_1940</span></code>. Opcionalmente, o nome de uma tabela pode ser qualificado com o nome de um esquema. Neste caso usamos a sintaxe <code class="docutils literal notranslate"><span class="pre">nome-esquema.nome-tabela</span></code>. Como exemplo de nomes de tabelas qualificados com o esquema, podemos citar: <code class="docutils literal notranslate"><span class="pre">public.foco</span></code>, <code class="docutils literal notranslate"><span class="pre">geo.lote</span></code>, <code class="docutils literal notranslate"><span class="pre">ibge.populacao_brasil</span></code>.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Outro detalhe importante sobre o nome de tabelas consiste no uso de delimitadores com aspas duplas (<code class="docutils literal notranslate"><span class="pre">&quot;</span></code>). Neste caso, podemos criar identificadores contendo caracteres especiais, além de diferenciar letras maiúsculas e minúsculas. Exemplos: <code class="docutils literal notranslate"><span class="pre">&quot;Foco&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;Foco</span> <span class="pre">v2&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">ibge.&quot;População</span> <span class="pre">do</span> <span class="pre">Brasil&quot;</span></code>.</p>
<p>No entanto, esse recurso deve ser utilizado com moderação para não dificultar o uso dos identificadores na construção de consultas, uma vez que será necessário empregar os delimitadores (<code class="docutils literal notranslate"><span class="pre">&quot;</span></code>).</p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Os nomes de tabelas são limitados a no máximo 63 bytes. Logo, se usarmos apenas letras (<code class="docutils literal notranslate"><span class="pre">a-z</span></code>), dígitos (<code class="docutils literal notranslate"><span class="pre">0-9</span></code>) ou sublinhado (<code class="docutils literal notranslate"><span class="pre">_</span></code>), isto significa um identificador de 63 caracteres.</p>
</div>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">nome-coluna</span></code>: O nome de colunas segue a mesma regra do nome de tabelas. A única diferença nesse caso é que não usamos a qualificação com o nome do esquema para colunas.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tipo-dados</span></code>: Podemos usar os tipos de dados discutidos nas Seções <a class="reference internal" href="tipos-dados.html#sec-sql-tipos-dados"><span class="std std-numref">1.5</span></a> e <a class="reference internal" href="tipos-geometricos.html#sec-sql-tipos-geometricos"><span class="std std-numref">1.6</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">restrição-coluna</span></code>: É possível especificar restrições de integridade a serem mantidas pelo SGBD em relação ao valores da coluna. Os tipos mais comuns de restrições incluem:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">NULL</span></code>: Especifica que a coluna é obrigatória.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NULL</span></code>: Especifica que podemos armazenar valores <code class="docutils literal notranslate"><span class="pre">NULL</span></code> na coluna.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CHECK</span> <span class="pre">(</span> <span class="pre">expressão</span> <span class="pre">)</span></code>: Uma expressão lógica envolvendo o valor a ser inserido ou atualizado na coluna que deva ser avaliado como verdadeiro para que o valor seja considerado válido. Usaremos este tipo de restrição nas tabelas que criaremos nessa seção.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DEFAULT</span> <span class="pre">expressão</span></code>: Um valor padrão caso a coluna seja omitida nas inserções.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GENERATED</span> <span class="pre">{</span> <span class="pre">ALWAYS</span> <span class="pre">|</span> <span class="pre">BY</span> <span class="pre">DEFAULT</span> <span class="pre">}</span> <span class="pre">AS</span> <span class="pre">IDENTITY</span></code>: Será usado um valor gerado a partir de uma sequência autoincremental.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UNIQUE</span></code>: Indica que a coluna deverá ter valores únicos.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PRIMARY</span> <span class="pre">KEY</span></code>: Indica que a coluna é chave primária e, portanto, possui valores únicos.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">REFERENCES</span></code>: Permite definir a coluna como uma chave estrangeira, referenciando a coluna de outra tabela.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">restrição-tabela</span></code>: Após as declarações das colunas, podemos incluir restrições que se aplicam à linha da tabela. Neste caso, podemos ter chaves primárias compostas, chaves estrangeiras compostas, chaves únicas compostas e retrições que envolvam valores de várias colunas. Portanto, podemos declarar as seguintes retrições:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CHECK</span> <span class="pre">(</span> <span class="pre">expressão</span> <span class="pre">)</span></code>: Uma expressão lógica que deve ser avaliada como verdadeiro para que os valores sendo inseridos na linha sejam considerados válidos.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UNIQUE</span></code>: Lista de colunas que formam uma chave única composta.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PRIMARY</span> <span class="pre">KEY</span></code>: Lista de colunas que formam uma chave primária composta.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FOREIGN</span> <span class="pre">KEY</span></code>: Lista de colunas que formam uma chave estrangeira composta.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<section id="exemplo-criacao-de-tabela">
<h2><span class="section-number">1.8.1. </span>Exemplo Criação de Tabela<a class="headerlink" href="#exemplo-criacao-de-tabela" title="Link permanente para este cabeçalho"></a></h2>
<p>Vamos criar uma tabela de exemplo chamada <code class="docutils literal notranslate"><span class="pre">sedes_municipais</span></code> com a seguinte estrutura:</p>
<table class="styled-table docutils align-center" id="id1">
<caption><span class="caption-number">Tabela 1.5 - </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">sedes_municipais</span></code>.</span><a class="headerlink" href="#id1" title="Link Permanente para essa tabela"></a></caption>
<thead>
<tr class="row-odd"><th class="head center-align" colspan="3" rowspan="2"><p>nome tabela: <strong>sedes_municipais</strong></p></th>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><th class="head center-align"><p>colunas</p></th>
<th class="head center-align"><p>tipo de dados</p></th>
<th class="head center-align"><p>modificadores</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="center-align"><p>gid</p></td>
<td class="left-align"><p>número inteiro</p></td>
<td class="center-align"><p>chave primária</p></td>
</tr>
<tr class="row-odd"><td class="center-align"><p>nome</p></td>
<td class="left-align"><p>texto de tamanho variável</p></td>
<td class="center-align"><p>limitado a 50 caracteres</p></td>
</tr>
<tr class="row-even"><td class="center-align"><p>localizacao</p></td>
<td class="left-align"><p>geometria</p></td>
<td class="center-align"><p>geometrias do subtipo ponto associados ao SRID 4326</p></td>
</tr>
</tbody>
</table>
<p>O comando de criação dessa tabela é mostrado abaixo:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">sedes_municipais</span>
<span class="p">(</span>
<span class="w">    </span><span class="n">gid</span><span class="w">          </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="n">nome</span><span class="w">         </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="n">localizacao</span><span class="w">  </span><span class="n">GEOMETRY</span><span class="p">(</span><span class="n">POINT</span><span class="p">,</span><span class="w"> </span><span class="mi">4326</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Para inserir tuplas (linhas ou registros) na tabela <code class="docutils literal notranslate"><span class="pre">sedes_municipais</span></code>:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">sedes_municipais</span><span class="w"> </span><span class="p">(</span><span class="n">nome</span><span class="p">,</span><span class="w"> </span><span class="n">localizacao</span><span class="p">)</span>
<span class="w">     </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;São Carlos&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">ST_GeomFromText</span><span class="p">(</span><span class="s1">&#39;POINT(-47.88497 -22.02557)&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">4326</span><span class="p">)</span><span class="w"> </span><span class="p">),</span>
<span class="w">            </span><span class="p">(</span><span class="s1">&#39;Ouro Preto&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">ST_GeomFromText</span><span class="p">(</span><span class="s1">&#39;POINT(-43.51592 -20.38144)&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">4326</span><span class="p">)</span><span class="w"> </span><span class="p">),</span>
<span class="w">            </span><span class="p">(</span><span class="s1">&#39;São José dos Campos&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">ST_GeomFromText</span><span class="p">(</span><span class="s1">&#39;POINT(-45.90245 -23.20000)&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">4326</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>Para consultar os metadados da tabela com feições denominada <code class="docutils literal notranslate"><span class="pre">sedes_municipais</span></code>:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">geometry_columns</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">f_table_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;sedes_municipais&#39;</span><span class="p">;</span>
</pre></div>
</div>
<hr class="docutils" />
<p><strong>Exercício:</strong> Visualizar os dados da tabela <code class="docutils literal notranslate"><span class="pre">sedes_municipais</span></code> no QGIS.</p>
</section>
<section id="estudo-de-caso">
<h2><span class="section-number">1.8.2. </span>Estudo de Caso<a class="headerlink" href="#estudo-de-caso" title="Link permanente para este cabeçalho"></a></h2>
<p>Considere o <strong>diagrama Entidade-Relacionamento</strong> (<strong>ER</strong>) mostrado na <a class="reference internal" href="#fig-sql-criando-tabelas-diagrama-er"><span class="std std-numref">Figura 1.9</span></a>.</p>
<figure class="align-center align-default" id="fig-sql-criando-tabelas-diagrama-er">
<a class="reference internal image-reference" href="../_images/diagrama-er.png"><img alt="Diagrama ER - Operações de crédito rural e glebas." src="../_images/diagrama-er.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-number">Figura 1.9 - </span><span class="caption-text">Diagrama ER - Operações de crédito rural contratadas por pessoas físicas.</span><a class="headerlink" href="#fig-sql-criando-tabelas-diagrama-er" title="Link Permanente para essa imagem"></a></p>
</figcaption>
</figure>
<p>Nesse diagrama temos as seguintes informações:</p>
<ul class="open">
<li><p>Um <em>Contratante</em> possui propriedades como: CPF, nome, gênero, classificação ou porte do agricultor e a data de seu cadastro no banco de dados. O atributo destacado <code class="docutils literal notranslate"><span class="pre">cpf</span></code> indica que os valores nessa coluna são únicos e, portanto, identifica unicamente um determinado contratante.</p></li>
<li><p>Uma <em>Operação</em>, ou contrato de financiamento, possui propriedades como: número do contrato, valor do financiamento, o período do contrato (data de início e fim). O atributo destacado <code class="docutils literal notranslate"><span class="pre">numero_contrato</span></code> indica que os valores nessa coluna são únicos e, portanto, identifica unicamente um determinado contrato.</p></li>
<li><p>O relacionamento entre <em>Contratante</em> e <em>Operação</em> possui uma cardinalidade de <code class="docutils literal notranslate"><span class="pre">M:N</span></code> (<code class="docutils literal notranslate"><span class="pre">M</span></code> para <code class="docutils literal notranslate"><span class="pre">N</span></code>), isto é, um certo contratante pode contratar uma ou mais operações e uma operação pode estar associada a um ou mais contratantes. Além disso, esse relacionamento possui um atributo que corresponde à data de assinatura do contrato pelo contratante.</p></li>
<li><p>Uma <em>Gleba</em> possui duas propriedades: identificador da gleba (<code class="docutils literal notranslate"><span class="pre">gid</span></code>) e a geometria representando os limites da área da gleba.</p></li>
<li><p>O relacionamento entre <em>Operação</em> e <em>Gleba</em> possui uma cardinalidade de <code class="docutils literal notranslate"><span class="pre">1:N</span></code> (<code class="docutils literal notranslate"><span class="pre">1</span></code> para <code class="docutils literal notranslate"><span class="pre">N</span></code>), isto é, um contrato pode referenciar uma ou mais glebas e uma gleba somente pode estar associada a um contrato.</p></li>
<li><p>Um <em>Município</em> possui propriedades como: identificador (<code class="docutils literal notranslate"><span class="pre">gid</span></code>), código do IBGE (<code class="docutils literal notranslate"><span class="pre">geocodigo</span></code>), nome e ogeometria representando os limites da área do município.</p></li>
<li><p>O relacionamento entre <em>Gleba</em> e <em>Município</em> é um relacionamento espacial, indicado de “maneira informal” pelas linhas tracejadas.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>A notação do Diagrama ER não permite representar relacionamentos espaciais. No exemplo acima, fizemos uma adaptação para ilustrar as informações que vamos manipular mais adiante.</p>
</div>
<p>A <a class="reference internal" href="#fig-sql-criando-tabelas-cardinalidade-er"><span class="std std-numref">Figura 1.10</span></a> apresenta a cardinalidade envolvida nos relacionamentos do diagrama acima.</p>
<figure class="align-center align-default" id="fig-sql-criando-tabelas-cardinalidade-er">
<a class="reference internal image-reference" href="../_images/cardinalidade-er.png"><img alt="Exemplo da cardinalidade dos relacionamento do Diagrama ER - Operações de crédito rural contratadas por pessoas físicas" src="../_images/cardinalidade-er.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-number">Figura 1.10 - </span><span class="caption-text">Exemplo da cardinalidade dos relacionamento do Diagrama ER - Operações de crédito rural contratadas por pessoas físicas.</span><a class="headerlink" href="#fig-sql-criando-tabelas-cardinalidade-er" title="Link Permanente para essa imagem"></a></p>
</figcaption>
</figure>
<p>A partir da compreensão do diagrama ER, podemos criar um novo diagrama mais próximo da implementação que faremos no PostgreSQL. O diagrama mostrado na <a class="reference internal" href="#fig-sql-criando-tabelas-modelo-logico"><span class="std std-numref">Figura 1.11</span></a> apresenta o modelo lógico que usaremos na criação das tabelas. Para cada entidade do diagrama ER da <a class="reference internal" href="#fig-sql-criando-tabelas-diagrama-er"><span class="std std-numref">Figura 1.9</span></a>, criamos uma relação ou tabela. Logo, as tabelas <code class="docutils literal notranslate"><span class="pre">contratante</span></code>, <code class="docutils literal notranslate"><span class="pre">operacao</span></code>, <code class="docutils literal notranslate"><span class="pre">gleba</span></code> e <code class="docutils literal notranslate"><span class="pre">municipio</span></code> no novo diagrama refletem esse processo. Os atributos darão origem às colunas nesse mapeamento, que já estarão associadas aos tipos de dados SQL suportados pelo PostgreSQL. Os atributos identificadores serão as chaves primárias, indicadas em negrito e com o símbolo <code class="docutils literal notranslate"><span class="pre">PK</span></code>. Nos relacionamentos <code class="docutils literal notranslate"><span class="pre">1:N</span></code>, os identificadores do lado <code class="docutils literal notranslate"><span class="pre">1</span></code> são incluídos também na tabela do lado <code class="docutils literal notranslate"><span class="pre">N</span></code> para materializar o relacionamento entre as tabelas. Essa coluna que materializa o relacionamento é definida como uma chave estrangeira, indicada pelo símbolo <code class="docutils literal notranslate"><span class="pre">FK</span></code>. Esse processo ocorreu na tabela <code class="docutils literal notranslate"><span class="pre">gleba</span></code>, que agora possui a coluna <code class="docutils literal notranslate"><span class="pre">operacao_numero</span></code> como uma chave estrangeira, relacionando as linhas da tabela <code class="docutils literal notranslate"><span class="pre">gleba</span></code> com linhas da tabela <code class="docutils literal notranslate"><span class="pre">operacao</span></code>. Por último, os relacionamentos com cardinalidade <code class="docutils literal notranslate"><span class="pre">M:N</span></code> dão origem a novas tabelas, como o caso da tabela <code class="docutils literal notranslate"><span class="pre">contratante_oeracao</span></code>, com colunas formadas pelos identificadores das outras duas tabelas e mais o atributo do relacionamento.</p>
<figure class="align-center align-default" id="fig-sql-criando-tabelas-modelo-logico">
<a class="reference internal image-reference" href="../_images/modelo-logico.png"><img alt="Modelo lógico - Operações de crédito rural contratadas por pessoas físicas" src="../_images/modelo-logico.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-number">Figura 1.11 - </span><span class="caption-text">Modelo lógico - Operações de crédito rural contratadas por pessoas físicas.</span><a class="headerlink" href="#fig-sql-criando-tabelas-modelo-logico" title="Link Permanente para essa imagem"></a></p>
</figcaption>
</figure>
<section id="comandos-de-definicao-de-dados">
<h3><span class="section-number">1.8.2.1. </span>Comandos de Definição de Dados<a class="headerlink" href="#comandos-de-definicao-de-dados" title="Link permanente para este cabeçalho"></a></h3>
<p>Agora que temos o modelo das tabelas que queremos criar e sabemos a sintaxe básica do comando <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code>, vamos definir as tabelas <code class="docutils literal notranslate"><span class="pre">contratante</span></code>, <code class="docutils literal notranslate"><span class="pre">contratante_operacao</span></code>, <code class="docutils literal notranslate"><span class="pre">operacao</span></code>, <code class="docutils literal notranslate"><span class="pre">gleba</span></code> e <code class="docutils literal notranslate"><span class="pre">municipio</span></code> usando SQL.</p>
<hr class="docutils" />
<p><strong>Tabela:</strong> <code class="docutils literal notranslate"><span class="pre">contratante:</span></code></p>
<div class="highlight-postgresql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">contratante</span>
<span class="p">(</span>
<span class="w">    </span><span class="n">cpf</span><span class="w">              </span><span class="nb">CHAR</span><span class="p">(</span><span class="mf">11</span><span class="p">)</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="n">nome</span><span class="w">             </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mf">80</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="n">genero</span><span class="w">           </span><span class="nb">CHAR</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">CHECK</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">genero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;m&#39;</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="n">genero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;f&#39;</span><span class="w"> </span><span class="p">),</span>
<span class="w">    </span><span class="n">classificacao</span><span class="w">    </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mf">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">classificacao</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;pequeno produtor&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;médio produtor&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;grande produtor&#39;</span><span class="p">)),</span>
<span class="w">    </span><span class="n">data_cadastro</span><span class="w">    </span><span class="nb">DATE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_DATE</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Na definição da tabela <code class="docutils literal notranslate"><span class="pre">contratante</span></code> temos:</p>
<ul class="open">
<li><p>A coluna <code class="docutils literal notranslate"><span class="pre">cpf</span></code> foi definida como uma cadeia de caracteres de tamanho fixo (11) além de ser indicada como chave primária (<code class="docutils literal notranslate"><span class="pre">PRIMARY</span> <span class="pre">KEY</span></code>).</p></li>
<li><p>A coluna <code class="docutils literal notranslate"><span class="pre">nome</span></code> foi definida como uma cadeia de caracteres de tamanho variável limitada a no máximo 80 caracteres, sendo os valores dessa coluna obrigatórios (<code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">NULL</span></code>).</p></li>
<li><p>A coluna <code class="docutils literal notranslate"><span class="pre">genero</span></code> foi definida como um caracter de tamanho 1, com uma <strong>restrição</strong> (<strong>check constraint</strong>) de uso apenas dos caracteres <code class="docutils literal notranslate"><span class="pre">m</span></code> ou <code class="docutils literal notranslate"><span class="pre">f</span></code>.</p></li>
<li><p>A coluna <code class="docutils literal notranslate"><span class="pre">data_cadastro</span></code> terá o valor padrão da data corrente do sistema no caso de ser omitida na inserção.</p></li>
</ul>
<hr class="docutils" />
<p><strong>Tabela:</strong> <code class="docutils literal notranslate"><span class="pre">operacao</span></code></p>
<div class="highlight-postgresql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">operacao</span>
<span class="p">(</span>
<span class="w">    </span><span class="n">numero</span><span class="w">       </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="k">GENERATED</span><span class="w"> </span><span class="k">ALWAYS</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">IDENTITY</span><span class="p">,</span>
<span class="w">    </span><span class="n">valor</span><span class="w">        </span><span class="nb">NUMERIC</span><span class="p">(</span><span class="mf">10</span><span class="p">,</span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="n">data_inicio</span><span class="w">  </span><span class="nb">DATE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="n">data_fim</span><span class="w">     </span><span class="nb">DATE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Na definição da tabela <code class="docutils literal notranslate"><span class="pre">operacao</span></code> temos:</p>
<ul class="open">
<li><p>A coluna <code class="docutils literal notranslate"><span class="pre">numero</span></code> foi definida como chave primária (<code class="docutils literal notranslate"><span class="pre">PRIMARY</span> <span class="pre">KEY</span></code>), comportando valores do tipo inteiro (<code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>) gerados sequencialmente e automaticamente pelo servidor (<code class="docutils literal notranslate"><span class="pre">GENERATED</span> <span class="pre">ALWAYS</span> <span class="pre">AS</span> <span class="pre">IDENTITY</span></code>).</p></li>
<li><p>A coluna <code class="docutils literal notranslate"><span class="pre">valor</span></code> foi definida como um número real de 10 dígitos com dois deles para casas decimais. Os valores dessa coluna são obrigatórios (<code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">NULL</span></code>).</p></li>
<li><p>As colunas <code class="docutils literal notranslate"><span class="pre">data_inicio</span></code> e <code class="docutils literal notranslate"><span class="pre">data_fim</span></code> foram definidas como datas e são campos obrigatórios.</p></li>
</ul>
<hr class="docutils" />
<p><strong>Tabela:</strong> <code class="docutils literal notranslate"><span class="pre">gleba</span></code></p>
<div class="highlight-postgresql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">gleba</span>
<span class="p">(</span>
<span class="w">    </span><span class="n">gid</span><span class="w">              </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="k">GENERATED</span><span class="w"> </span><span class="k">ALWAYS</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">IDENTITY</span><span class="p">,</span>
<span class="w">    </span><span class="n">geom</span><span class="w">             </span><span class="n">GEOMETRY</span><span class="p">(</span><span class="n">MULTIPOLYGON</span><span class="p">,</span><span class="w"> </span><span class="mf">4674</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="hll"><span class="w">    </span><span class="n">operacao_numero</span><span class="w">  </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">operacao</span><span class="p">(</span><span class="n">numero</span><span class="p">)</span>
</span><span class="hll"><span class="w">                                          </span><span class="k">ON</span><span class="w"> </span><span class="k">DELETE</span><span class="w"> </span><span class="k">NO</span><span class="w"> </span><span class="k">ACTION</span>
</span><span class="hll"><span class="w">                                          </span><span class="k">ON</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">CASCADE</span>
</span><span class="p">);</span>
</pre></div>
</div>
<p>Na definição da tabela <code class="docutils literal notranslate"><span class="pre">gleba</span></code> temos:</p>
<ul class="open">
<li><p>A coluna <code class="docutils literal notranslate"><span class="pre">gid</span></code> foi definida como chave primária (<code class="docutils literal notranslate"><span class="pre">PRIMARY</span> <span class="pre">KEY</span></code>), comportando valores do tipo inteiro (<code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>) gerados sequencialmente e automaticamente pelo servidor (<code class="docutils literal notranslate"><span class="pre">GENERATED</span> <span class="pre">ALWAYS</span> <span class="pre">AS</span> <span class="pre">IDENTITY</span></code>).</p></li>
<li><p>A coluna <code class="docutils literal notranslate"><span class="pre">geom</span></code> foi definida como um tipo geométrico, mais especificamente com o subtipo MultiPolygon com coordenadas associadas ao CRS EPSG:4674.</p></li>
<li><p>A coluna <code class="docutils literal notranslate"><span class="pre">operacao_numero</span></code> foi definida como um tipo inteiro e obrigatório.</p></li>
<li><p>Nessa tabela temos a definição de uma <strong>chave estrangeira</strong>, impondo um relacionamento de <strong>integridade referencial</strong> entre as tabelas <code class="docutils literal notranslate"><span class="pre">operacao</span></code> e <code class="docutils literal notranslate"><span class="pre">gleba</span></code> nas colunas <code class="docutils literal notranslate"><span class="pre">numero</span></code> (tabela <code class="docutils literal notranslate"><span class="pre">operacao</span></code>) e <code class="docutils literal notranslate"><span class="pre">operacao_numero</span></code> (tabela <code class="docutils literal notranslate"><span class="pre">gleba</span></code>). A sentença <code class="docutils literal notranslate"><span class="pre">ON</span> <span class="pre">DELETE</span> <span class="pre">NO</span> <span class="pre">ACTION</span></code> indica que no caso de remoção de linhas da tabela <code class="docutils literal notranslate"><span class="pre">operacao</span></code> que tenham glebas associadas, deverá ser gerado um erro, impedindo a remoção das linhas da tabela <code class="docutils literal notranslate"><span class="pre">operacao</span></code>. A setença <code class="docutils literal notranslate"><span class="pre">ON</span> <span class="pre">UPDATE</span> <span class="pre">CASCADE</span></code> define que no caso de atualização da chave primária na tabela <code class="docutils literal notranslate"><span class="pre">operacao</span></code>, o novo valor deva ser propagado automaticamente para as linhas relacionadas na tabela <code class="docutils literal notranslate"><span class="pre">gleba</span></code>.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>A definição de chave estrangeira pode ser indicada separadamente, como mostrado no exemplo abaixo:</p>
<div class="highlight-postgresql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">gleba</span>
<span class="p">(</span>
<span class="w">    </span><span class="n">gid</span><span class="w">              </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="k">GENERATED</span><span class="w"> </span><span class="k">ALWAYS</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">IDENTITY</span><span class="p">,</span>
<span class="w">    </span><span class="n">geom</span><span class="w">             </span><span class="n">GEOMETRY</span><span class="p">(</span><span class="n">MULTIPOLYGON</span><span class="p">,</span><span class="w"> </span><span class="mf">4674</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="n">operacao_numero</span><span class="w">  </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="hll"><span class="w">    </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">operacao_numero</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">operacao</span><span class="p">(</span><span class="n">numero</span><span class="p">)</span>
</span><span class="hll"><span class="w">                                   </span><span class="k">ON</span><span class="w"> </span><span class="k">DELETE</span><span class="w"> </span><span class="k">NO</span><span class="w"> </span><span class="k">ACTION</span>
</span><span class="hll"><span class="w">                                   </span><span class="k">ON</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">CASCADE</span>
</span><span class="p">);</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<p><strong>Tabela:</strong> <code class="docutils literal notranslate"><span class="pre">contratante_operacao</span></code></p>
<div class="highlight-postgresql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">contratante_operacao</span>
<span class="p">(</span>
<span class="w">    </span><span class="n">cpf</span><span class="w">              </span><span class="nb">CHAR</span><span class="p">(</span><span class="mf">11</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">contratante</span><span class="p">(</span><span class="n">cpf</span><span class="p">)</span>
<span class="w">                                             </span><span class="k">ON</span><span class="w"> </span><span class="k">DELETE</span><span class="w"> </span><span class="k">NO</span><span class="w"> </span><span class="k">ACTION</span>
<span class="w">                                             </span><span class="k">ON</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">CASCADE</span><span class="p">,</span>
<span class="w">    </span><span class="n">numero</span><span class="w">           </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">operacao</span><span class="p">(</span><span class="n">numero</span><span class="p">)</span>
<span class="w">                                            </span><span class="k">ON</span><span class="w"> </span><span class="k">DELETE</span><span class="w"> </span><span class="k">NO</span><span class="w"> </span><span class="k">ACTION</span>
<span class="w">                                            </span><span class="k">ON</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">CASCADE</span><span class="p">,</span>
<span class="w">    </span><span class="n">data_assinatura</span><span class="w">  </span><span class="nb">DATE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_DATE</span><span class="p">,</span>
<span class="hll"><span class="w">    </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">cpf</span><span class="p">,</span><span class="w"> </span><span class="n">numero</span><span class="p">)</span>
</span><span class="p">);</span>
</pre></div>
</div>
<p>Repare na definição da tabela acima que:</p>
<ul class="open">
<li><p>A coluna <code class="docutils literal notranslate"><span class="pre">cpf</span></code> possui uma restrição de chave estrangeira, referenciando a coluna <code class="docutils literal notranslate"><span class="pre">cpf</span></code> na tabela <code class="docutils literal notranslate"><span class="pre">contratante</span></code>.</p></li>
<li><p>A coluna <code class="docutils literal notranslate"><span class="pre">numero</span></code> também possui uma restrição de chave estrangeira, referenciando a coluna <code class="docutils literal notranslate"><span class="pre">numero</span></code> na tabela <code class="docutils literal notranslate"><span class="pre">operacao</span></code>.</p></li>
<li><p>A coluna <code class="docutils literal notranslate"><span class="pre">data_assinatura</span></code> irá registrar a data em que o contratante assinou o contrato de financiamento.</p></li>
<li><p>A <strong>chave primária</strong> dessa tabela é <strong>composta</strong> e, por isso, foi definida logo após a declaração de todas as colunas. Desta forma, podemos especificar as colunas <code class="docutils literal notranslate"><span class="pre">cpf</span></code> e <code class="docutils literal notranslate"><span class="pre">numero</span></code> como a chave primária.</p></li>
</ul>
<hr class="docutils" />
<p><strong>Tabela:</strong> <code class="docutils literal notranslate"><span class="pre">municipio</span></code></p>
<div class="highlight-postgresql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">municipio</span>
<span class="p">(</span>
<span class="w">    </span><span class="n">gid</span><span class="w">              </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="k">GENERATED</span><span class="w"> </span><span class="k">ALWAYS</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">IDENTITY</span><span class="p">,</span>
<span class="w">    </span><span class="n">geocodigo</span><span class="w">        </span><span class="nb">CHAR</span><span class="p">(</span><span class="mf">7</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="n">nome</span><span class="w">             </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mf">50</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="n">geom</span><span class="w">             </span><span class="n">GEOMETRY</span><span class="p">(</span><span class="n">MULTIPOLYGON</span><span class="p">,</span><span class="w"> </span><span class="mf">4674</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Repare na definição da tabela acima que:</p>
<ul class="open">
<li><p>A coluna <code class="docutils literal notranslate"><span class="pre">gid</span></code> foi definida como chave primária (<code class="docutils literal notranslate"><span class="pre">PRIMARY</span> <span class="pre">KEY</span></code>), comportando valores do tipo inteiro (<code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>) gerados sequencialmente e automaticamente pelo servidor (<code class="docutils literal notranslate"><span class="pre">GENERATED</span> <span class="pre">ALWAYS</span> <span class="pre">AS</span> <span class="pre">IDENTITY</span></code>).</p></li>
<li><p>A coluna <code class="docutils literal notranslate"><span class="pre">geocodigo</span></code> foi definida como uma cadeia de caracteres de tamanho fixo (7) e com valores obrigatórios (<code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">NULL</span></code>).</p></li>
<li><p>A coluna <code class="docutils literal notranslate"><span class="pre">nome</span></code> foi definida como uma cadeia de caracteres de tamanho variável limitada a no máximo 50 caracteres, sendo os valores dessa coluna obrigatórios (<code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">NULL</span></code>).</p></li>
<li><p>A coluna <code class="docutils literal notranslate"><span class="pre">geom</span></code> foi definida como um tipo geométrico, mais especificamente com o subtipo MultiPolygon com coordenadas associadas ao CRS EPSG:4674.</p></li>
<li><p>O relacionamento espacial não será materializado em uma coluna pois iremos computar <em>on-the-fly</em> com os operadores topológicos suportados pelo PostGIS.</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Rodapé">
        <a href="postgis-geometry.html" class="btn btn-neutral float-left" title="1.7. PostGIS Geometry" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Anterior</a>
        <a href="inserindo-dados.html" class="btn btn-neutral float-right" title="1.9. Inserindo Dados" accesskey="n" rel="next">Próximo <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Time.</p>
  </div>

  
<jinja2.runtime.BlockReference object at 0x7f8371c765e0>
<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://mirrors.creativecommons.org/presskit/buttons/88x31/png/by-nc-sa.png" width="117" height="41"/></a> This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons “Attribution-NonCommercial-ShareAlike 4.0 International” license</a>.


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>